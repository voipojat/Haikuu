{"ast":null,"code":"import _objectSpread from \"/Users/antontuominen/Desktop/NovelApp/react_novel/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/antontuominen/Desktop/NovelApp/react_novel/src/Haiku.js\";\nimport React, { useContext } from 'react';\nimport { Paper } from '@material-ui/core';\nimport { HaikuContext } from './HaikuList';\nimport { AuthContext } from './Auth';\nimport { Grid } from '@material-ui/core';\nimport syllable from 'syllable';\nexport default function Haiku({\n  title,\n  text,\n  user,\n  score,\n  id\n}) {\n  const _useContext = useContext(AuthContext),\n        currentUser = _useContext.currentUser;\n\n  const _useContext2 = useContext(HaikuContext),\n        haikus = _useContext2.haikus,\n        setHaiku = _useContext2.setHaiku;\n\n  function chopHaiku(evt, start, syl) {\n    var haiku = \"\";\n    var index = \"\";\n\n    for (let i = 0; i < evt.length; i++) {\n      if (count(index) === start) {\n        break;\n      }\n\n      index = index + evt[i];\n    }\n\n    for (let i = index.length; i < evt.length; i++) {\n      haiku = haiku + evt[i];\n\n      if (count(haiku) === syl) {\n        haiku = haiku + '\\n';\n        break;\n      }\n    }\n\n    return haiku;\n  }\n\n  var count = function (word) {\n    word = word.toLowerCase();\n    word = word.replace(/(?:[^laeiouy]|ed|[^laeiouy]e)$/, '');\n    word = word.replace(/^y/, ''); //return word.match(/[aeiouy]{1,2}/g).length;   \n\n    var syl = word.match(/[aeiouy]{1,2}/g);\n    console.log(syl);\n\n    if (syl) {\n      //console.log(syl);\n      return syl.length;\n    }\n  };\n\n  const handleHaiku = (id, a) => {\n    //making sure that user can only have one vote for haiku\n    const updatedHaikus = haikus.map(haiku => haiku.id === id && haiku.userVote.includes(currentUser.email) != true ? _objectSpread({}, haiku, {\n      score: haiku.score + a,\n      userVote: [...haiku.userVote, currentUser.email]\n    }) : haiku);\n    updatedHaikus.sort((a, b) => b.score - a.score);\n    setHaiku(updatedHaikus);\n  };\n\n  window.localStorage.setItem(\"haikus\", JSON.stringify(haikus));\n  return React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    style: {\n      margin: \"0.5rem\",\n      width: \"25%\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, React.createElement(Paper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      fontSize: \"2rem\",\n      backgroundColor: \"rgb(247,249,250)\",\n      float: \"left\",\n      margin: \"0.5rem\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    style: {\n      color: \"green\",\n      margin: \"0 auto\"\n    },\n    className: \"fas fa-thumbs-up\",\n    onClick: () => handleHaiku(id, 1),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    style: {\n      margin: \"0 auto\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, score), React.createElement(\"i\", {\n    style: {\n      color: \"pink\",\n      margin: \"0 auto\"\n    },\n    className: \"fas fa-thumbs-down\",\n    onClick: () => handleHaiku(id, -1),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    style: {\n      textAlign: \"center\",\n      margin: \"1rem\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, \"\\\"\", title, \"\\\"\"), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, chopHaiku(text, 0, 5), \" \"), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, chopHaiku(text, 5, 7), \" \"), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, chopHaiku(text, 12, 5), \" \"), React.createElement(\"div\", {\n    style: {\n      fontSize: \"0.8rem\",\n      marginTop: \"0.5rem\",\n      marginBottom: \"0.5rem\",\n      fontWeight: \"bold\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, \"-\", user))));\n}","map":{"version":3,"sources":["/Users/antontuominen/Desktop/NovelApp/react_novel/src/Haiku.js"],"names":["React","useContext","Paper","HaikuContext","AuthContext","Grid","syllable","Haiku","title","text","user","score","id","currentUser","haikus","setHaiku","chopHaiku","evt","start","syl","haiku","index","i","length","count","word","toLowerCase","replace","match","console","log","handleHaiku","a","updatedHaikus","map","userVote","includes","email","sort","b","window","localStorage","setItem","JSON","stringify","margin","width","display","flexDirection","fontSize","backgroundColor","float","color","textAlign","marginTop","marginBottom","fontWeight"],"mappings":"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","sourcesContent":["import React, { useContext } from 'react'\nimport { Paper } from '@material-ui/core'\nimport { HaikuContext } from './HaikuList'\nimport { AuthContext } from './Auth'\nimport { Grid } from '@material-ui/core'\nimport syllable from 'syllable'\n\nexport default function Haiku({ title, text, user, score, id }) {\n    const { currentUser } = useContext(AuthContext);\n    const { haikus, setHaiku } = useContext(HaikuContext)\n\n    function chopHaiku(evt, start, syl) {\n        var haiku = \"\";\n        var index = \"\";\n        for (let i = 0; i < evt.length; i++) {\n            if (count(index) === start) {\n                break;\n            }\n            index = index + evt[i];\n        }\n        for (let i = index.length; i < evt.length; i++) {\n            haiku = haiku + evt[i];\n            if (count(haiku) === syl) {\n                haiku = haiku + '\\n';\n                break;\n            }\n        }\n        return haiku\n    }\n\n\n    var count = function (word) {\n        word = word.toLowerCase();\n        word = word.replace(/(?:[^laeiouy]|ed|[^laeiouy]e)$/, '');\n        word = word.replace(/^y/, '');\n        //return word.match(/[aeiouy]{1,2}/g).length;   \n        var syl = word.match(/[aeiouy]{1,2}/g);\n        console.log(syl);\n        if (syl) {\n            //console.log(syl);\n            return syl.length;\n        }\n    }\n\n    const handleHaiku = (id, a) => {\n        //making sure that user can only have one vote for haiku\n        const updatedHaikus = haikus.map(haiku => (\n            haiku.id === id && haiku.userVote.includes(currentUser.email) != true ? { ...haiku, score: haiku.score + a, userVote: [...haiku.userVote, currentUser.email] } : haiku)\n        )\n        updatedHaikus.sort((a, b) => b.score - a.score);\n        setHaiku(updatedHaikus);\n    }\n    window.localStorage.setItem(\"haikus\", JSON.stringify(haikus))\n    return (\n        <Grid item xs={12} sm={6} style={{ margin: \"0.5rem\", width: \"25%\" }}>\n            <Paper >\n                <div style={{ display: \"flex\", flexDirection: \"column\", fontSize: \"2rem\", backgroundColor: \"rgb(247,249,250)\", float: \"left\", margin: \"0.5rem\" }}>\n                    <i style={{ color: \"green\", margin: \"0 auto\" }} className=\"fas fa-thumbs-up\" onClick={() => handleHaiku(id, 1)}></i>\n                    <div style={{ margin: \"0 auto\" }}>{score}</div>\n                    <i style={{ color: \"pink\", margin: \"0 auto\" }} className=\"fas fa-thumbs-down\" onClick={() => handleHaiku(id, -1)}></i>\n                </div>\n                <div style={{ textAlign: \"center\", margin: \"1rem\" }}>\n                    <h2>\"{title}\"</h2>\n                    <div>{chopHaiku(text, 0, 5)} </div>\n                    <div>{chopHaiku(text, 5, 7)} </div>\n                    <div>{chopHaiku(text, 12, 5)} </div>\n\n                    <div style={{ fontSize: \"0.8rem\", marginTop: \"0.5rem\", marginBottom: \"0.5rem\", fontWeight: \"bold\" }}>-{user}</div>\n                </div>\n\n            </Paper>\n        </Grid>\n\n    )\n}\n\n\n"]},"metadata":{},"sourceType":"module"}