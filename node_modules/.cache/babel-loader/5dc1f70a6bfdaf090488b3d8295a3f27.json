{"ast":null,"code":"import _objectSpread from \"/Users/antontuominen/Desktop/HaikuApp/react_haiku/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/antontuominen/Desktop/HaikuApp/react_haiku/src/Haiku.js\";\nimport React, { useContext, useEffect } from 'react';\nimport { Paper } from '@material-ui/core';\nimport { HaikuContext } from './context/HaikuList';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { AuthContext } from './context/Auth';\nimport { Grid } from '@material-ui/core';\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    maxWidth: 300,\n    margin: `${theme.spacing(1)}px auto`,\n    padding: theme.spacing(2)\n  }\n}));\nexport default function Haiku({\n  title,\n  text,\n  user,\n  score,\n  id\n}) {\n  const classes = useStyles();\n\n  const _useContext = useContext(AuthContext),\n        currentUser = _useContext.currentUser;\n\n  const _useContext2 = useContext(HaikuContext),\n        haikus = _useContext2.haikus,\n        setHaiku = _useContext2.setHaiku;\n\n  const db = firebase.firestore();\n  let cityRef = db.collection('haikus').doc('8LMQarulirmmNLL8dTqY');\n\n  const handleHaiku = (id, a) => {\n    //making sure that user can only have one vote for haiku\n    const updatedHaikus = haikus.map(haiku => haiku.id === id && haiku.userVote.includes(currentUser.email) !== true ? _objectSpread({}, haiku, {\n      score: haiku.score + a,\n      userVote: [...haiku.userVote, currentUser.email]\n    }) : haiku);\n    updatedHaikus.sort((a, b) => b.score - a.score);\n    setHaiku(updatedHaikus);\n  };\n\n  useEffect(() => {\n    cityRef.get().then(doc => {\n      if (!doc.exists) {\n        setHaiku([\"plop\"]);\n      } else {\n        setHaiku(doc.data().haikus);\n      }\n    }).catch(err => {\n      setHaiku([]);\n    });\n  });\n  return React.createElement(Paper, {\n    className: classes.paper,\n    style: {\n      wordWrap: \"break-word\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    container: true,\n    wrap: \"nowrap\",\n    spacing: 3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      fontSize: \"2rem\",\n      backgroundColor: \"rgb(247,249,250)\",\n      padding: \"0.5rem\",\n      borderRadius: \"15px\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    style: {\n      color: \"green\",\n      margin: \"0 auto\"\n    },\n    className: \"fas fa-thumbs-up\",\n    onClick: !!currentUser ? () => handleHaiku(id, 1) : null,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    style: {\n      margin: \"0 auto\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, score), React.createElement(\"i\", {\n    style: {\n      color: \"pink\",\n      margin: \"0 auto\"\n    },\n    className: \"fas fa-thumbs-down\",\n    onClick: !!currentUser ? () => handleHaiku(id, -1) : null,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }))), React.createElement(Grid, {\n    item: true,\n    xs: true,\n    zeroMinWidth: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    style: {\n      marginTop: 0,\n      padding: 0\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    style: {\n      fontWeight: \"bold\",\n      marginBottom: \"0.4rem\",\n      fontSize: \"2rem\",\n      fontFamily: 'Allura'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, \"\\\"\", title, \"\\\"\"), React.createElement(\"div\", {\n    style: {\n      whiteSpace: \"pre-wrap\",\n      lineHeight: \"1.6\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, text, \" \"), React.createElement(\"div\", {\n    style: {\n      fontSize: \"0.8rem\",\n      marginTop: \"0.5rem\",\n      marginBottom: \"0.5rem\",\n      fontWeight: \"bold\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, \"-\", user)))));\n}","map":{"version":3,"sources":["/Users/antontuominen/Desktop/HaikuApp/react_haiku/src/Haiku.js"],"names":["React","useContext","useEffect","Paper","HaikuContext","makeStyles","AuthContext","Grid","useStyles","theme","paper","maxWidth","margin","spacing","padding","Haiku","title","text","user","score","id","classes","currentUser","haikus","setHaiku","db","firebase","firestore","cityRef","collection","doc","handleHaiku","a","updatedHaikus","map","haiku","userVote","includes","email","sort","b","get","then","exists","data","catch","err","wordWrap","display","flexDirection","fontSize","backgroundColor","borderRadius","color","marginTop","fontWeight","marginBottom","fontFamily","whiteSpace","lineHeight"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect } from 'react'\nimport { Paper } from '@material-ui/core'\nimport { HaikuContext } from './context/HaikuList'\nimport { makeStyles } from '@material-ui/core/styles';\nimport { AuthContext } from './context/Auth'\nimport { Grid } from '@material-ui/core'\n\nconst useStyles = makeStyles(theme => ({\n    paper: {\n        maxWidth: 300,\n        margin: `${theme.spacing(1)}px auto`,\n        padding: theme.spacing(2),\n    },\n}));\n\nexport default function Haiku({ title, text, user, score, id }) {\n    const classes = useStyles();\n    const { currentUser } = useContext(AuthContext);\n    const { haikus, setHaiku } = useContext(HaikuContext)\n    const db = firebase.firestore();\n    let cityRef = db.collection('haikus').doc('8LMQarulirmmNLL8dTqY');\n    const handleHaiku = (id, a) => {\n        //making sure that user can only have one vote for haiku\n        const updatedHaikus = haikus.map(haiku => (\n            haiku.id === id && haiku.userVote.includes(currentUser.email) !== true ? { ...haiku, score: haiku.score + a, userVote: [...haiku.userVote, currentUser.email] } : haiku)\n        )\n        updatedHaikus.sort((a, b) => b.score - a.score);\n        setHaiku(updatedHaikus);\n    }\n\n    useEffect(() => {\n        cityRef.get()\n            .then(doc => {\n\n                if (!doc.exists) {\n                    setHaiku([\"plop\"])\n                } else {\n                    setHaiku(doc.data().haikus);\n                }\n            })\n            .catch(err => {\n                setHaiku([])\n            });\n\n    })\n\n\n\n\n    return (\n        <Paper className={classes.paper} style={{\n            wordWrap: \"break-word\"\n        }}>\n            <Grid container wrap=\"nowrap\" spacing={3}>\n                <Grid item >\n                    <div style={{ display: \"flex\", flexDirection: \"column\", fontSize: \"2rem\", backgroundColor: \"rgb(247,249,250)\", padding: \"0.5rem\", borderRadius: \"15px\" }}>\n                        <i style={{ color: \"green\", margin: \"0 auto\" }} className=\"fas fa-thumbs-up\" onClick={!!currentUser ? () => handleHaiku(id, 1) : null}></i>\n                        <div style={{ margin: \"0 auto\" }}>{score}</div>\n                        <i style={{ color: \"pink\", margin: \"0 auto\" }} className=\"fas fa-thumbs-down\" onClick={!!currentUser ? () => handleHaiku(id, -1) : null}></i>\n                    </div>\n                </Grid>\n                <Grid item xs zeroMinWidth >\n                    <div style={{ marginTop: 0, padding: 0 }}>\n                        <div style={{ fontWeight: \"bold\", marginBottom: \"0.4rem\", fontSize: \"2rem\", fontFamily: 'Allura' }}>\"{title}\"</div>\n                        <div style={{ whiteSpace: \"pre-wrap\", lineHeight: \"1.6\" }}>{text} </div>\n                        <div style={{ fontSize: \"0.8rem\", marginTop: \"0.5rem\", marginBottom: \"0.5rem\", fontWeight: \"bold\" }}>-{user}</div>\n                    </div>\n                </Grid>\n            </Grid>\n        </Paper >\n    )\n}\n\n\n"]},"metadata":{},"sourceType":"module"}